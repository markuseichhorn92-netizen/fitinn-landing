<!-- BOOKING MODAL - Apple Style -->
<style>
    .bk-rate-card { border: 2px solid rgba(255,255,255,0.1); cursor: pointer; transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
    .bk-rate-card:hover { border-color: rgba(221,155,67,0.4); background: rgba(221,155,67,0.05); }
    .bk-rate-card.selected { border-color: #DD9B43; background: rgba(221,155,67,0.1); }
    .bk-rate-card.recommended { border-color: rgba(221,155,67,0.5); }
    .bk-module-opt { border: 2px solid rgba(255,255,255,0.1); cursor: pointer; transition: all 0.2s; }
    .bk-module-opt:hover { border-color: rgba(221,155,67,0.3); }
    .bk-module-opt.selected { border-color: #DD9B43; background: rgba(221,155,67,0.1); }
    .bk-summary-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.08); }
    .bk-summary-row:last-child { border-bottom: none; }
    .bk-spinner { width: 20px; height: 20px; border: 2px solid rgba(0,0,0,0.2); border-top-color: #000; border-radius: 50%; animation: bk-spin 0.6s linear infinite; display: inline-block; vertical-align: middle; margin-right: 8px; }
    @keyframes bk-spin { to { transform: rotate(360deg); } }
    .bk-input { width: 100%; height: 52px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); border-radius: 12px; padding: 0 16px; font-size: 16px; color: white; transition: border-color 0.2s; }
    .bk-input:focus { outline: none; border-color: #DD9B43; }
    .bk-input::placeholder { color: rgba(255,255,255,0.35); }
    .bk-form-step { display: none; }
    .bk-form-step.active { display: block; animation: bkFadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
    @keyframes bkFadeIn { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }
</style>

<style>
    /* Prevent horizontal scroll */
    #modal-booking .modal-content { overflow-x: hidden; max-width: 100%; }
    
    /* Uniform input sizing - FIXED */
    #modal-booking input,
    #modal-booking select {
        width: 100%;
        height: 48px;
        max-height: 48px;
        min-height: 48px;
        padding: 0 16px;
        border-radius: 12px;
        box-sizing: border-box;
    }
    
    /* Date input fix - prevent oversized native picker */
    #modal-booking input[type="date"] {
        height: 48px;
        max-height: 48px;
        min-height: 48px;
        -webkit-appearance: none;
        appearance: none;
    }
    
    /* Mobile: all single column */
    @media (max-width: 640px) {
        #modal-booking .grid { 
            display: flex !important;
            flex-direction: column !important;
            gap: 12px !important;
        }
        #modal-booking .grid > * { 
            width: 100% !important;
            max-width: 100% !important;
        }
        #modal-booking .modal-content {
            padding-left: 16px;
            padding-right: 16px;
        }
    }
    .pb-safe-bk { padding-bottom: env(safe-area-inset-bottom, 20px); }
</style>
<div id="modal-booking" class="modal-overlay fixed inset-0 z-[100] flex items-end md:items-center justify-center bg-black/80 backdrop-blur-xl">
    <div class="modal-content bg-[#1c1c1e] rounded-t-3xl md:rounded-3xl w-full md:max-w-xl max-h-[95vh] md:max-h-[90vh] overflow-y-auto border-t md:border border-white/10 pb-safe-bk">
        <!-- Header -->
        <div class="sticky top-0 bg-[#1c1c1e]/95 backdrop-blur-xl border-b border-white/10 p-6 flex justify-between items-center z-10">
            <div>
                <h2 class="text-xl font-bold">Mitgliedschaft</h2>
                <p class="text-sm text-white/50" id="bk-header-subtitle">W√§hle deinen Tarif</p>
            </div>
            <button onclick="closeModal('booking')" class="text-white/40 hover:text-white p-2 transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        
        <!-- Progress -->
        <div class="px-6 py-4 border-b border-white/10">
            <div class="flex justify-between text-xs text-white/40 mb-2">
                <span>Schritt <span id="bk-current-step">1</span> von 6</span>
                <span id="bk-step-name">Tarif</span>
            </div>
            <div class="h-1 bg-white/10 rounded-full overflow-hidden">
                <div id="bk-progress-bar" class="h-full bg-[#DD9B43] rounded-full transition-all" style="width: 16.66%"></div>
            </div>
        </div>
        
        <!-- Content -->
        <div class="p-6">
            
            <!-- Step 1: Tarif -->
            <div id="bk-step-1" class="bk-form-step active">
                <h3 class="text-lg font-semibold mb-6">Welcher Tarif passt zu dir?</h3>
                
                <div class="space-y-4" id="bk-rates-container">
                    <!-- Flex -->
                    <div class="bk-rate-card rounded-2xl p-5" data-rate-id="1213385750" data-term-id="1213385760" data-price="15" data-term="4 Wochen" data-name="Flex">
                        <div class="flex justify-between items-start">
                            <div>
                                <h4 class="font-semibold text-lg">Flex</h4>
                                <p class="text-sm text-white/50">4 Wochen Erstlaufzeit</p>
                            </div>
                            <div class="text-right">
                                <span class="text-2xl font-bold">15‚Ç¨</span>
                                <span class="text-white/50 text-sm">/Woche</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Premium -->
                    <div class="bk-rate-card recommended rounded-2xl p-5 relative" data-rate-id="1213385790" data-term-id="1213385800" data-price="9" data-term="24 Monate" data-name="Premium">
                        <div class="absolute -top-3 left-5 bg-[#DD9B43] text-black text-xs font-bold px-3 py-1 rounded-full">Empfohlen</div>
                        <div class="flex justify-between items-start pt-1">
                            <div>
                                <h4 class="font-semibold text-lg text-[#DD9B43]">Premium</h4>
                                <p class="text-sm text-white/50">24 Monate ¬∑ Bester Preis</p>
                            </div>
                            <div class="text-right">
                                <span class="text-2xl font-bold text-[#DD9B43]">9‚Ç¨</span>
                                <span class="text-white/50 text-sm">/Woche</span>
                            </div>
                        </div>
                        <div class="mt-2 inline-block bg-[#DD9B43]/20 text-[#DD9B43] text-xs font-medium px-2 py-1 rounded">+ 2 Monate gratis</div>
                    </div>
                    
                    <!-- Basic -->
                    <div class="bk-rate-card rounded-2xl p-5" data-rate-id="1213385780" data-term-id="1213385761" data-price="12" data-term="12 Monate" data-name="Basic">
                        <div class="flex justify-between items-start">
                            <div>
                                <h4 class="font-semibold text-lg">Basic</h4>
                                <p class="text-sm text-white/50">12 Monate Laufzeit</p>
                            </div>
                            <div class="text-right">
                                <span class="text-2xl font-bold">12‚Ç¨</span>
                                <span class="text-white/50 text-sm">/Woche</span>
                            </div>
                        </div>
                        <div class="mt-2 inline-block bg-[#DD9B43]/20 text-[#DD9B43] text-xs font-medium px-2 py-1 rounded">+ 2 Monate gratis</div>
                    </div>
                </div>
                
                <button id="bk-btn-1" disabled onclick="bkGoToStep(2)" class="w-full bg-[#DD9B43] hover:bg-[#e6ac5a] text-black font-semibold py-4 rounded-full mt-6 transition-all disabled:opacity-40 disabled:cursor-not-allowed">
                    Weiter
                </button>
            </div>
            
            <!-- Step 2: Module -->
            <div id="bk-step-2" class="bk-form-step">
                <h3 class="text-lg font-semibold mb-2">Upgrade dein Training</h3>
                <p class="text-sm text-white/50 mb-6">Optional:</p>
                
                <div id="bk-modules-container" class="space-y-3"></div>
                <div id="bk-no-modules" class="text-center py-10 text-white/50" style="display: none;">
                    <span class="text-4xl block mb-2">‚ú®</span>
                    <p>Alles inklusive in deinem Tarif!</p>
                </div>
                
                <div class="flex gap-3 mt-6">
                    <button onclick="bkGoToStep(1)" class="flex-1 py-4 rounded-full border border-white/20 font-semibold hover:border-white/40 transition-all">Zur√ºck</button>
                    <button id="bk-btn-2" onclick="bkGoToStep(3)" class="flex-1 bg-[#DD9B43] hover:bg-[#e6ac5a] text-black font-semibold py-4 rounded-full transition-all">Weiter</button>
                </div>
            </div>
            
            <!-- Step 3: Pers√∂nliche Daten -->
            <div id="bk-step-3" class="bk-form-step">
                <h3 class="text-lg font-semibold mb-6">Pers√∂nliche Angaben</h3>
                
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-sm font-medium mb-2">Vorname</label>
                            <input type="text" id="bk-firstname" required class="bk-input">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Nachname</label>
                            <input type="text" id="bk-lastname" required class="bk-input">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-sm font-medium mb-2">E-Mail</label>
                            <input type="email" id="bk-email" required class="bk-input">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Telefon</label>
                            <input type="tel" id="bk-phone" required class="bk-input" placeholder="+49...">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-sm font-medium mb-2">Geburtsdatum</label>
                            <input type="date" id="bk-birthdate" required class="bk-input">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Anrede</label>
                            <select id="bk-gender" required class="bk-input">
                                <option value="">W√§hlen</option>
                                <option value="MALE">Herr</option>
                                <option value="FEMALE">Frau</option>
                                <option value="UNISEX">Divers</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-3 mt-6">
                    <button onclick="bkGoToStep(2)" class="flex-1 py-4 rounded-full border border-white/20 font-semibold hover:border-white/40 transition-all">Zur√ºck</button>
                    <button id="bk-btn-3" onclick="bkGoToStep(4)" class="flex-1 bg-[#DD9B43] hover:bg-[#e6ac5a] text-black font-semibold py-4 rounded-full transition-all">Weiter</button>
                </div>
            </div>
            
            <!-- Step 4: Adresse -->
            <div id="bk-step-4" class="bk-form-step">
                <h3 class="text-lg font-semibold mb-6">Adresse</h3>
                
                <div class="space-y-4">
                    <div class="grid grid-cols-3 gap-3">
                        <div class="col-span-2">
                            <label class="block text-sm font-medium mb-2">Stra√üe</label>
                            <input type="text" id="bk-street" required class="bk-input">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Nr.</label>
                            <input type="text" id="bk-housenumber" required class="bk-input">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-3">
                        <div>
                            <label class="block text-sm font-medium mb-2">PLZ</label>
                            <input type="text" id="bk-zip" required class="bk-input" maxlength="5">
                        </div>
                        <div class="col-span-2">
                            <label class="block text-sm font-medium mb-2">Stadt</label>
                            <input type="text" id="bk-city" required class="bk-input">
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-3 mt-6">
                    <button onclick="bkGoToStep(3)" class="flex-1 py-4 rounded-full border border-white/20 font-semibold hover:border-white/40 transition-all">Zur√ºck</button>
                    <button id="bk-btn-4" onclick="bkGoToStep(5)" class="flex-1 bg-[#DD9B43] hover:bg-[#e6ac5a] text-black font-semibold py-4 rounded-full transition-all">Weiter</button>
                </div>
            </div>
            
            <!-- Step 5: Bankdaten -->
            <div id="bk-step-5" class="bk-form-step">
                <h3 class="text-lg font-semibold mb-2">Zahlungsdaten</h3>
                <p class="text-sm text-white/50 mb-6">SEPA-Lastschrift alle 14 Tage</p>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Kontoinhaber</label>
                        <input type="text" id="bk-accountholder" required class="bk-input">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">IBAN</label>
                        <input type="text" id="bk-iban" required class="bk-input" placeholder="DE89 3704 0044 0532 0130 00">
                    </div>
                </div>
                
                <div class="bg-white/5 border border-white/10 rounded-xl p-4 mt-4 text-xs text-white/50">
                    üîí Deine Daten werden verschl√ºsselt √ºbertragen.
                </div>
                
                <div class="flex gap-3 mt-6">
                    <button onclick="bkGoToStep(4)" class="flex-1 py-4 rounded-full border border-white/20 font-semibold hover:border-white/40 transition-all">Zur√ºck</button>
                    <button id="bk-btn-5" onclick="bkGoToStep(6)" class="flex-1 bg-[#DD9B43] hover:bg-[#e6ac5a] text-black font-semibold py-4 rounded-full transition-all">Weiter</button>
                </div>
            </div>
            
            <!-- Step 6: Zusammenfassung -->
            <div id="bk-step-6" class="bk-form-step">
                <h3 class="text-lg font-semibold mb-6">Zusammenfassung</h3>
                
                <div class="bg-white/5 rounded-2xl p-5 mb-4">
                    <div id="bk-summary-content"></div>
                </div>
                
                <div class="bg-[#DD9B43]/10 border border-[#DD9B43]/30 rounded-2xl p-5 mb-6">
                    <div class="flex justify-between items-center">
                        <span class="font-medium">Erste Zahlung</span>
                        <span id="bk-first-payment" class="text-xl font-bold text-[#DD9B43]">39‚Ç¨</span>
                    </div>
                    <p class="text-xs text-white/50 mt-1">Startpaket einmalig</p>
                </div>
                
                <div class="space-y-3 mb-6">
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="bk-agb" required class="mt-1 accent-[#DD9B43] w-5 h-5">
                        <span class="text-sm text-white/70">Ich akzeptiere die <a href="https://fit-inn-trier.de/agb" target="_blank" rel="noopener" class="text-[#DD9B43] hover:underline">AGB</a> und <a href="https://fit-inn-trier.de/datenschutz" target="_blank" rel="noopener" class="text-[#DD9B43] hover:underline">Datenschutzerkl√§rung</a>.</span>
                    </label>
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="bk-sepa" required class="mt-1 accent-[#DD9B43] w-5 h-5">
                        <span class="text-sm text-white/70">Ich erm√§chtige FIT-INN, Zahlungen per SEPA-Lastschrift einzuziehen.</span>
                    </label>
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="bk-widerruf" required class="mt-1 accent-[#DD9B43] w-5 h-5">
                        <span class="text-sm text-white/70">Ich habe die <a href="https://fit-inn-trier.de/widerruf" target="_blank" rel="noopener" class="text-[#DD9B43] hover:underline">Widerrufsbelehrung</a> gelesen.</span>
                    </label>
                </div>
                
                <div id="bk-form-error" class="bg-red-500/20 border border-red-500/30 text-red-400 text-sm rounded-xl p-4 mb-4" style="display: none;"></div>
                
                <div class="flex gap-3">
                    <button onclick="bkGoToStep(5)" class="flex-1 py-4 rounded-full border border-white/20 font-semibold hover:border-white/40 transition-all">Zur√ºck</button>
                    <button id="bk-submit-btn" onclick="bkSubmit()" class="flex-1 bg-[#DD9B43] hover:bg-[#e6ac5a] text-black font-semibold py-4 rounded-full transition-all">
                        Mitglied werden
                    </button>
                </div>
            </div>
            
            <!-- Step 7: Best√§tigung -->
            <div id="bk-step-7" class="bk-form-step">
                <div class="text-center py-8">
                    <div class="text-6xl mb-4">‚úì</div>
                    <h3 class="text-2xl font-bold mb-2 text-[#DD9B43]">Willkommen!</h3>
                    <p class="text-white/50 mb-8">Deine Mitgliedschaft ist aktiv.</p>
                    
                    <div class="bg-white/5 rounded-2xl p-5 text-left text-sm mb-6">
                        <div class="bk-summary-row"><span class="text-white/50">Tarif</span><span id="bk-confirm-rate">-</span></div>
                        <div class="bk-summary-row"><span class="text-white/50">Name</span><span id="bk-confirm-name">-</span></div>
                        <div class="bk-summary-row"><span class="text-white/50">Vertragsnr.</span><span id="bk-confirm-contract" class="text-[#DD9B43]">-</span></div>
                    </div>
                    
                    <button onclick="closeModal('booking')" class="w-full bg-[#DD9B43] hover:bg-[#e6ac5a] text-black font-semibold py-4 rounded-full transition-all">
                        Fertig
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
const BK_API = 'https://fit-inn-trier.api.magicline.com/connect/v1';
const BK_STUDIO_ID = 1210005460;
let bkCurrentStep = 1;
let bkSelectedRate = null;
let bkSelectedModules = [];
const bkStepNames = { 1: 'Tarif', 2: 'Upgrades', 3: 'Daten', 4: 'Adresse', 5: 'Zahlung', 6: 'Best√§tigen', 7: 'Fertig' };

document.querySelectorAll('.bk-rate-card').forEach(card => {
    card.onclick = () => {
        document.querySelectorAll('.bk-rate-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');
        bkSelectedRate = {
            rateId: parseInt(card.dataset.rateId),
            termId: parseInt(card.dataset.termId),
            price: parseFloat(card.dataset.price),
            term: card.dataset.term,
            name: card.dataset.name
        };
        document.getElementById('bk-btn-1').disabled = false;
    };
});

function bkGoToStep(n) {
    bkCurrentStep = n;
    document.querySelectorAll('.bk-form-step').forEach(s => s.classList.remove('active'));
    document.getElementById(`bk-step-${n}`).classList.add('active');
    document.getElementById('bk-progress-bar').style.width = `${(n/7)*100}%`;
    document.getElementById('bk-current-step').textContent = n;
    document.getElementById('bk-step-name').textContent = bkStepNames[n];
    const subtitles = { 1: 'W√§hle deinen Tarif', 2: 'Optionale Extras', 3: '√úber dich', 4: 'F√ºr den Vertrag', 5: 'SEPA-Lastschrift', 6: 'Pr√ºfen & Best√§tigen', 7: 'Willkommen!' };
    document.getElementById('bk-header-subtitle').textContent = subtitles[n] || '';
    if (n === 2) bkRenderModules();
    if (n === 6) bkRenderSummary();
}

function bkRenderModules() {
    const container = document.getElementById('bk-modules-container');
    const noModules = document.getElementById('bk-no-modules');
    container.innerHTML = '';
    bkSelectedModules = [];
    const modulesByRate = {
        1213385750: [{ id: 1213385815, name: 'Ern√§hrungsplan 12 Monate', price: 119, desc: 'Individuell f√ºr dich' }],
        1213385780: [
            { id: 1213878351, name: 'Activity Analyse', price: 39, desc: 'Bewegungsmuster-Check' },
            { id: 1213878352, name: 'Food & Stress Analyse', price: 19, desc: 'Ern√§hrung & Stress' },
            { id: 1213878353, name: 'Longevity Checkup', price: 49, desc: 'Langlebigkeitsanalyse' }
        ],
        1213385790: []
    };
    const modules = modulesByRate[bkSelectedRate.rateId] || [];
    if (!modules.length) { container.style.display = 'none'; noModules.style.display = 'block'; }
    else {
        container.style.display = 'block'; noModules.style.display = 'none';
        modules.forEach(mod => {
            const div = document.createElement('div');
            div.className = 'bk-module-opt rounded-xl p-4 flex justify-between items-center';
            div.innerHTML = `<div><h4 class="font-medium">${mod.name}</h4><p class="text-xs text-white/50">${mod.desc}</p></div><div class="text-right"><span class="font-bold text-[#DD9B43]">+${mod.price}‚Ç¨</span></div>`;
            div.onclick = () => {
                div.classList.toggle('selected');
                if (div.classList.contains('selected')) bkSelectedModules.push(mod);
                else bkSelectedModules = bkSelectedModules.filter(m => m.id !== mod.id);
            };
            container.appendChild(div);
        });
    }
}

function bkRenderSummary() {
    const container = document.getElementById('bk-summary-content');
    let html = `
        <div class="bk-summary-row"><span class="text-white/50">Tarif</span><span class="font-medium">${bkSelectedRate.name}</span></div>
        <div class="bk-summary-row"><span class="text-white/50">Laufzeit</span><span>${bkSelectedRate.term}</span></div>
        <div class="bk-summary-row"><span class="text-white/50">Beitrag</span><span>${bkSelectedRate.price}‚Ç¨/Woche</span></div>
        <div class="bk-summary-row"><span class="text-white/50">Startpaket</span><span>39‚Ç¨</span></div>
    `;
    let total = 39;
    if (bkSelectedModules.length) {
        html += `<div class="border-t border-white/10 my-2"></div>`;
        bkSelectedModules.forEach(m => { html += `<div class="bk-summary-row"><span class="text-white/50">${m.name}</span><span>+${m.price}‚Ç¨</span></div>`; total += m.price; });
    }
    container.innerHTML = html;
    document.getElementById('bk-first-payment').textContent = total + '‚Ç¨';
}

async function bkSubmit() {
    const btn = document.getElementById('bk-submit-btn');
    const errDiv = document.getElementById('bk-form-error');
    errDiv.style.display = 'none';
    if (!document.getElementById('bk-agb').checked || !document.getElementById('bk-sepa').checked || !document.getElementById('bk-widerruf').checked) {
        errDiv.textContent = 'Bitte alle Checkboxen best√§tigen.';
        errDiv.style.display = 'block';
        return;
    }
    btn.disabled = true;
    btn.innerHTML = '<span class="bk-spinner"></span>Wird gesendet...';
    const payload = {
        studioId: BK_STUDIO_ID,
        termId: bkSelectedRate.termId,
        optionalModuleIds: bkSelectedModules.map(m => m.id),
        customer: {
            gender: document.getElementById('bk-gender').value,
            firstname: document.getElementById('bk-firstname').value,
            lastname: document.getElementById('bk-lastname').value,
            email: document.getElementById('bk-email').value,
            mobileNumber: document.getElementById('bk-phone').value,
            dateOfBirth: document.getElementById('bk-birthdate').value,
            address: { street: document.getElementById('bk-street').value, houseNumber: document.getElementById('bk-housenumber').value, zip: document.getElementById('bk-zip').value, city: document.getElementById('bk-city').value, countryCode: 'DE' }
        },
        bankAccount: { accountHolder: document.getElementById('bk-accountholder').value, iban: document.getElementById('bk-iban').value.replace(/\s/g, '') },
        consents: { termsAndConditions: true, privacyPolicy: true, sepaMandate: true }
    };
    try {
        const res = await fetch(`${BK_API}/contract`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
        const result = await res.json();
        if (!res.ok) throw new Error(result.message || result.error || 'Fehler');
        document.getElementById('bk-confirm-rate').textContent = bkSelectedRate.name;
        document.getElementById('bk-confirm-name').textContent = `${payload.customer.firstname} ${payload.customer.lastname}`;
        document.getElementById('bk-confirm-contract').textContent = result.contractNumber || result.id || '-';
        bkGoToStep(7);
    } catch (err) {
        errDiv.textContent = err.message;
        errDiv.style.display = 'block';
        btn.disabled = false;
        btn.textContent = 'Mitglied werden';
    }
}

document.getElementById('bk-iban')?.addEventListener('input', function(e) {
    let v = e.target.value.replace(/\s/g, '').toUpperCase();
    e.target.value = v.replace(/(.{4})/g, '$1 ').trim();
});
</script>
